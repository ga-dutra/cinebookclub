import*as e from"react";import{Tooltip as t}from"primereact/tooltip";import{classNames as n,ObjectUtils as l,DomHandler as o}from"primereact/utils";import{Ripple as r}from"primereact/ripple";function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e},a.apply(this,arguments)}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,l=new Array(t);n<t;n++)l[n]=e[n];return l}function u(e){if(Array.isArray(e))return i(e)}function s(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function c(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}function p(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function f(e){return u(e)||s(e)||c(e)||p()}function m(e){if(Array.isArray(e))return e}function d(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var l,o,r,a,i=[],u=!0,s=!1;try{if(r=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(l=r.call(n)).done)&&(i.push(l.value),i.length!==t);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return i}}function b(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var v=e.memo((function(t){var o,a,i=e.useState(!1),u=(a=2,m(o=i)||d(o,a)||c(o,a)||b()),s=u[1],p=function(e){t.onClick&&t.onClick({originalEvent:e,option:t.option})},f=n("p-button p-component",{"p-highlight":t.selected,"p-disabled":t.disabled,"p-focus":u[0]},t.className),v=t.template?l.getJSXElement(t.template,t.option):e.createElement("span",{className:"p-button-label p-c"},t.label);return e.createElement("div",{className:f,role:"button","aria-label":t.label,"aria-pressed":t.selected,onClick:p,onKeyDown:function(e){32===e.which&&(p(e),e.preventDefault())},tabIndex:t.tabIndex,onFocus:function(){s(!0)},onBlur:function(){s(!1)}},v,!t.disabled&&e.createElement(r,null))}));v.displayName="SelectButtonItem";var y=e.memo(e.forwardRef((function(r,i){var u=e.useRef(null),s=function(e){if(!r.disabled&&!m(e.option)){var t=d(e.option);if(!t||r.unselectable){var n,o=p(e.option);if(r.multiple){var a=r.value?f(r.value):[];n=t?a.filter((function(e){return!l.equals(e,o,r.dataKey)})):[].concat(f(a),[o])}else n=t?null:o;r.onChange&&r.onChange({originalEvent:e.originalEvent,value:n,stopPropagation:function(){},preventDefault:function(){},target:{name:r.name,id:r.id,value:n}})}}},c=function(e){return r.optionLabel?l.resolveFieldData(e,r.optionLabel):e&&void 0!==e.label?e.label:e},p=function(e){return r.optionValue?l.resolveFieldData(e,r.optionValue):e&&void 0!==e.value?e.value:e},m=function(e){return r.optionDisabled?l.isFunction(r.optionDisabled)?r.optionDisabled(e):l.resolveFieldData(e,r.optionDisabled):!(!e||void 0===e.disabled)&&e.disabled},d=function(e){var t=p(e);return r.multiple?!(!r.value||!r.value.length)&&r.value.some((function(e){return l.equals(e,t,r.dataKey)})):l.equals(r.value,t,r.dataKey)};e.useImperativeHandle(i,(function(){return{props:r,focus:function(){return o.focusFirstElement(u.current)},getElement:function(){return u.current}}}));var b=l.isNotEmpty(r.tooltip),g=l.findDiffKeys(r,y.defaultProps),h=n("p-selectbutton p-buttonset p-component",r.className),E=r.options&&r.options.length?r.options.map((function(t,n){var l=r.disabled||m(t),o=c(t),a=l?null:0,i=d(t);return e.createElement(v,{key:o+"_"+n,label:o,className:t.className,option:t,onClick:s,template:r.itemTemplate,selected:i,tabIndex:a,disabled:l})})):null;return e.createElement(e.Fragment,null,e.createElement("div",a({ref:u,id:r.id,className:h,style:r.style},g,{role:"group"}),E),b&&e.createElement(t,a({target:u,content:r.tooltip},r.tooltipOptions)))})));y.displayName="SelectButton",y.defaultProps={__TYPE:"SelectButton",id:null,value:null,options:null,optionLabel:null,optionValue:null,optionDisabled:null,tabIndex:null,multiple:!1,unselectable:!0,disabled:!1,style:null,className:null,dataKey:null,tooltip:null,tooltipOptions:null,itemTemplate:null,onChange:null};export{y as SelectButton};
